[gd_scene load_steps=12 format=3 uid="uid://d0mer00ituels"]

[ext_resource type="Script" uid="uid://dxkeftgpdeo8" path="res://Scripts/enemy.gd" id="1_kfkw2"]
[ext_resource type="Texture2D" uid="uid://c2ivboeq415v6" path="res://Sprites/Enemies/crab_placeholder.png" id="2_ahjfl"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tcq61"]

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_kfkw2"]
constant = Color(0.588235, 0.588235, 0, 1)

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_ahjfl"]
default_input_values = [0, Quaternion(0, 0, 0, 0), 1, Quaternion(0, 0, 0, 0)]
op_type = 2

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_xk562"]
input_name = "color"

[sub_resource type="VisualShaderNodeIf" id="VisualShaderNodeIf_okbt1"]
output_port_for_preview = 0

[sub_resource type="VisualShaderNodeBooleanParameter" id="VisualShaderNodeBooleanParameter_fxo42"]
parameter_name = "enabled"
default_value_enabled = true

[sub_resource type="VisualShader" id="VisualShader_wjtkc"]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform bool enabled = false;



void fragment() {
// Input:4
	vec4 n_out4p0 = COLOR;


// BooleanParameter:6
	bool n_out6p0 = enabled;


// ColorConstant:2
	vec4 n_out2p0 = vec4(0.588235, 0.588235, 0.000000, 1.000000);


	vec3 n_out5p0;
// If:5
	float n_in5p1 = 0.00000;
	float n_in5p2 = 0.00001;
	vec3 n_in5p3 = vec3(0.00000, 0.00000, 0.00000);
	vec3 n_in5p5 = vec3(0.00000, 0.00000, 0.00000);
	if(abs((n_out6p0 ? 1.0 : 0.0) - n_in5p1) < n_in5p2)
	{
		n_out5p0 = n_in5p3;
	}
	else if((n_out6p0 ? 1.0 : 0.0) < n_in5p1)
	{
		n_out5p0 = n_in5p5;
	}
	else
	{
		n_out5p0 = vec3(n_out2p0.xyz);
	}


// VectorOp:3
	vec4 n_out3p0 = n_out4p0 + vec4(n_out5p0, 0.0);


// Output:0
	COLOR.rgb = vec3(n_out3p0.xyz);


}
"
graph_offset = Vector2(-482.202, -29.5745)
mode = 1
flags/light_only = false
nodes/fragment/0/position = Vector2(420, 160)
nodes/fragment/2/node = SubResource("VisualShaderNodeColorConstant_kfkw2")
nodes/fragment/2/position = Vector2(-380, 340)
nodes/fragment/3/node = SubResource("VisualShaderNodeVectorOp_ahjfl")
nodes/fragment/3/position = Vector2(180, 100)
nodes/fragment/4/node = SubResource("VisualShaderNodeInput_xk562")
nodes/fragment/4/position = Vector2(-200, 80)
nodes/fragment/5/node = SubResource("VisualShaderNodeIf_okbt1")
nodes/fragment/5/position = Vector2(-120, 200)
nodes/fragment/6/node = SubResource("VisualShaderNodeBooleanParameter_fxo42")
nodes/fragment/6/position = Vector2(-460, 140)
nodes/fragment/connections = PackedInt32Array(5, 0, 3, 1, 4, 0, 3, 0, 6, 0, 5, 0, 2, 0, 5, 4, 3, 0, 0, 0)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_phlqb"]
shader = SubResource("VisualShader_wjtkc")
shader_parameter/enabled = false

[sub_resource type="CircleShape2D" id="CircleShape2D_kfkw2"]
radius = 72.76

[node name="Enemy" type="Node2D"]
script = ExtResource("1_kfkw2")
flip_sprite_with_direction = false

[node name="Enemy" type="CharacterBody2D" parent="." groups=["attackable", "damage_player", "freezable", "hookable", "pullable"]]
collision_layer = 4
collision_mask = 3
floor_constant_speed = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy"]
visible = false
position = Vector2(0, -6)
scale = Vector2(0.97878, 0.560718)
shape = SubResource("RectangleShape2D_tcq61")

[node name="GFX" type="Sprite2D" parent="Enemy"]
material = SubResource("ShaderMaterial_phlqb")
position = Vector2(0, -16.325)
texture = ExtResource("2_ahjfl")

[node name="AggroEnterArea" type="Area2D" parent="Enemy"]
visible = false
position = Vector2(0, -7)
collision_layer = 0
collision_mask = 2
monitorable = false

[node name="AggroShape" type="CollisionShape2D" parent="Enemy/AggroEnterArea"]
visible = false
shape = SubResource("CircleShape2D_kfkw2")

[node name="AggroExitArea" type="Area2D" parent="Enemy"]
visible = false
position = Vector2(0, -7)
collision_layer = 0
collision_mask = 2
monitorable = false

[node name="AggroShape" type="CollisionShape2D" parent="Enemy/AggroExitArea"]
shape = SubResource("CircleShape2D_kfkw2")

[node name="Target" type="Node2D" parent="."]
visible = false
position = Vector2(-74.035, 0)

[node name="WaitTimer" type="Timer" parent="."]
wait_time = 2.0

[connection signal="body_entered" from="Enemy/AggroEnterArea" to="." method="player_entered"]
[connection signal="body_exited" from="Enemy/AggroExitArea" to="." method="player_left"]
